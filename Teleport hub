-- LocalScript (StarterPlayerScripts or StarterGui)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TweenService = game:GetService("TweenService")

-- ==== UI SETUP ====
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TeleportHub"
screenGui.IgnoreGuiInset = true
screenGui.ResetOnSpawn = false
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 280, 0, 360)
frame.Position = UDim2.new(0.5, -140, 0.5, -180)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 16)

-- Shadow
local shadow = Instance.new("ImageLabel")
shadow.Size = UDim2.new(1, 40, 1, 40)
shadow.Position = UDim2.new(0, -20, 0, -20)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://1316045217"
shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
shadow.ImageTransparency = 0.5
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(10,10,118,118)
shadow.Parent = frame
shadow.ZIndex = 0

-- Title Bar
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -50, 0, 45)
title.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
title.Text = "üåç Premium Teleport Hub"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 12)

-- Close Button
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 45, 0, 45)
closeBtn.Position = UDim2.new(1, -45, 0, 0)
closeBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.new(1,1,1)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 20
closeBtn.Parent = frame
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 12)

-- Player List
local playerList = Instance.new("ScrollingFrame")
playerList.Size = UDim2.new(1, -20, 1, -110)
playerList.Position = UDim2.new(0, 10, 0, 50)
playerList.CanvasSize = UDim2.new(0,0,0,0)
playerList.ScrollBarThickness = 6
playerList.BackgroundTransparency = 1
playerList.Parent = frame
local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = playerList
UIListLayout.Padding = UDim.new(0, 6)

-- Leave Button
local leaveBtn = Instance.new("TextButton")
leaveBtn.Size = UDim2.new(1, -20, 0, 40)
leaveBtn.Position = UDim2.new(0, 10, 1, -50)
leaveBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
leaveBtn.Text = "üö™ Auto Leave Game"
leaveBtn.TextColor3 = Color3.new(1,1,1)
leaveBtn.Font = Enum.Font.GothamBold
leaveBtn.TextSize = 18
leaveBtn.Parent = frame
Instance.new("UICorner", leaveBtn).CornerRadius = UDim.new(0, 10)

-- ==== NOTIFICATION SYSTEM ====
local function ShowNotification(msg, success)
	local notif = Instance.new("TextLabel")
	notif.Size = UDim2.new(0, 260, 0, 40)
	notif.Position = UDim2.new(0.5, -130, 0, -60)
	notif.BackgroundColor3 = success and Color3.fromRGB(0, 200, 100) or Color3.fromRGB(200, 50, 50)
	notif.Text = msg
	notif.TextColor3 = Color3.new(1,1,1)
	notif.Font = Enum.Font.GothamBold
	notif.TextSize = 18
	notif.Parent = screenGui
	notif.ZIndex = 10
	Instance.new("UICorner", notif).CornerRadius = UDim.new(0, 12)

	-- Slide in
	TweenService:Create(notif, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = UDim2.new(0.5, -130, 0, 20)}):Play()

	-- Fade out
	task.delay(2, function()
		TweenService:Create(notif, TweenInfo.new(0.5), {TextTransparency = 1, BackgroundTransparency = 1}):Play()
		game:GetService("Debris"):AddItem(notif, 1)
	end)
end

-- ==== TELEPORT FUNCTION ====
local function TeleportToPlayer(playerName)
	local targetPlayer = Players:FindFirstChild(playerName)
	if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
		local targetHRP = targetPlayer.Character.HumanoidRootPart
		local myChar = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
		local myHRP = myChar:WaitForChild("HumanoidRootPart")

		myHRP.CFrame = targetHRP.CFrame + Vector3.new(2,0,2)
		ShowNotification("‚úÖ Teleported to " .. playerName, true)
	else
		ShowNotification("‚ùå Failed to teleport!", false)
	end
end

-- ==== CREATE PLAYER BUTTONS ====
local function RefreshPlayerList()
	for _,child in pairs(playerList:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end

	for _,player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer then
			local btn = Instance.new("TextButton")
			btn.Size = UDim2.new(1, -5, 0, 35)
			btn.Text = "üë§ " .. player.Name
			btn.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
			btn.TextColor3 = Color3.fromRGB(255,255,255)
			btn.Font = Enum.Font.GothamSemibold
			btn.TextSize = 16
			btn.Parent = playerList
			Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

			-- Hover animation
			btn.MouseEnter:Connect(function()
				TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(70, 120, 255)}):Play()
			end)
			btn.MouseLeave:Connect(function()
				TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(50, 50, 70)}):Play()
			end)

			btn.MouseButton1Click:Connect(function()
				TeleportToPlayer(player.Name)
			end)
		end
	end
	playerList.CanvasSize = UDim2.new(0,0,0,UIListLayout.AbsoluteContentSize.Y + 10)
end

-- ==== AUTO LEAVE FUNCTION WITH 2s TIMER ====
leaveBtn.MouseButton1Click:Connect(function()
	local countdown = Instance.new("TextLabel")
	countdown.Size = UDim2.new(0, 260, 0, 40)
	countdown.Position = UDim2.new(0.5, -130, 0, -60)
	countdown.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
	countdown.TextColor3 = Color3.new(1,1,1)
	countdown.Font = Enum.Font.GothamBold
	countdown.TextSize = 18
	countdown.Text = "üö™ Leaving in 2..."
	countdown.Parent = screenGui
	countdown.ZIndex = 10
	Instance.new("UICorner", countdown).CornerRadius = UDim.new(0, 12)

	TweenService:Create(countdown, TweenInfo.new(0.3), {Position = UDim2.new(0.5, -130, 0, 20)}):Play()

	for i = 2,1,-1 do
		countdown.Text = "üö™ Leaving in " .. i .. "..."
		task.wait(1)
	end

	LocalPlayer:Kick("You left the game. (Auto Leave)")
end)

-- ==== CLOSE BUTTON ====
closeBtn.MouseButton1Click:Connect(function()
	frame.Visible = not frame.Visible
end)

-- ==== UPDATE PLAYER LIST DYNAMICALLY ====
Players.PlayerAdded:Connect(RefreshPlayerList)
Players.PlayerRemoving:Connect(RefreshPlayerList)
RefreshPlayerList()
